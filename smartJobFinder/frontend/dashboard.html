<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Smart Job Finder</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=EB+Garamond:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="assets/style.css">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-light bg-white shadow-sm px-4 py-3">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="dashboard.html">Smart<span style="color: var(--primary-dark);">Job</span>Finder</a>
        <div>
            <a href="jobs.html" class="btn btn-outline-primary rounded-pill me-2">Browse Jobs</a>
            <a href="profile.html" class="btn btn-outline-primary rounded-pill me-2">Profile</a>
            <a href="chatbot.html" class="btn btn-outline-primary rounded-pill me-2">
                <i class="fas fa-robot me-2"></i>Chatbot
            <a href="index.html" class="btn btn-primary rounded-pill" onclick="logout()">Logout</a>
        </div>
    </div>
</nav>

<!-- HERO -->
<div class="hero" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);">
    <div class="text-center">
        <h1 class="hero-title" id="welcomeMessage">Find Your Perfect Job</h1>
        <p class="hero-subtitle">Search thousands of opportunities tailored for you.</p>

        <!-- SEARCH BAR -->
        <div class="search-bar mt-4">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <form id="dashboardSearchForm" action="jobs.html" method="get">
                        <div class="bg-white rounded-pill p-2 shadow-lg">
                            <div class="input-group">
                                <span class="input-group-text bg-transparent border-0">
                                    <i class="fas fa-search text-muted"></i>
                                </span>
                                <input type="text" class="form-control border-0" id="dashboardJobSearch" name="search" placeholder="Job title, company, or keyword">
                                <button type="submit" class="btn btn-primary rounded-pill px-4">Search</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- PROFILE COMPLETION ALERT -->
<div class="container mt-4">
    <div class="alert alert-warning alert-dismissible fade show" id="profileCompletionAlert" style="display: none;">
        <div class="d-flex align-items-center">
            <i class="fas fa-exclamation-circle me-3 fa-lg"></i>
            <div>
                <h6 class="mb-1">Complete your profile!</h6>
                <p class="mb-0" id="profileCompletionText">Upload your CV to get better job recommendations.</p>
            </div>
            <div class="ms-auto">
                <a href="upload-cv.html?edit=true" class="btn btn-sm btn-warning me-2">Complete Profile</a>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        </div>
    </div>
</div>

<!-- Quick Stats -->
<section class="container my-5">
    <div class="text-center mb-5">
        <h2 class="fw-bold">Your Job Search Dashboard</h2>
        <p class="text-muted">Track your progress and discover new opportunities</p>
    </div>

    <div class="row g-4">
        <div class="col-md-3">
            <div class="stat-card p-4 rounded-4 shadow-sm text-center">
                <div class="stat-icon mb-3">
                    <i class="fas fa-briefcase fa-2x text-primary"></i>
                </div>
                <h3 class="fw-bold" id="jobsApplied">0</h3>
                <p class="text-muted">Jobs Applied</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card p-4 rounded-4 shadow-sm text-center">
                <div class="stat-icon mb-3">
                    <i class="fas fa-heart fa-2x text-primary"></i>
                </div>
                <h3 class="fw-bold" id="jobsSaved">0</h3>
                <p class="text-muted">Jobs Saved</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card p-4 rounded-4 shadow-sm text-center">
                <div class="stat-icon mb-3">
                    <i class="fas fa-eye fa-2x text-primary"></i>
                </div>
                <h3 class="fw-bold" id="profileViews">0</h3>
                <p class="text-muted">Profile Views</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card p-4 rounded-4 shadow-sm text-center">
                <div class="stat-icon mb-3">
                    <i class="fas fa-calendar-check fa-2x text-primary"></i>
                </div>
                <h3 class="fw-bold" id="interviews">0</h3>
                <p class="text-muted">Interviews</p>
            </div>
        </div>
    </div>
</section>

<!-- RECOMMENDED JOBS SECTION (NEW!) -->
<section class="container mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h3 class="fw-bold">Recommended For You</h3>
            <p class="text-muted mb-0">Jobs that match your profile and preferences</p>
        </div>
        <button class="btn btn-outline-primary rounded-pill btn-sm" onclick="loadRecommendedJobs()">
            <i class="fas fa-sync-alt me-2"></i>Refresh
        </button>
    </div>
    
    <div id="recommendedJobsContainer">
        <div class="text-center py-4">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2 text-muted">Loading recommended jobs...</p>
        </div>
    </div>
</section>

<!-- RECENT ACTIVITY SECTION (NEW!) -->
<section class="container mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="fw-bold">Recent Activity</h3>
        <button class="btn btn-outline-primary rounded-pill btn-sm" onclick="loadActivityTimeline()">
            <i class="fas fa-sync-alt me-2"></i>Refresh
        </button>
    </div>
    
    <div class="card shadow-sm border-0 rounded-4 p-4">
        <div id="activityTimelineContainer">
            <div class="text-center py-4">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2 text-muted">Loading activity...</p>
            </div>
        </div>
    </div>
</section>

<!-- CATEGORY SECTION -->
<section class="container my-5">
    <div class="text-center mb-4">
        <h2 class="fw-bold">Browse By Category</h2>
        <p class="text-muted">Explore jobs in your field of interest</p>
    </div>

    <div class="row g-4">
        <div class="col-md-3">
            <div class="category-box" data-category="development">
                <i class="fas fa-code fa-2x mb-3 text-primary"></i>
                <h5>Software Development</h5>
                <p class="text-muted small">125 jobs available</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="category-box" data-category="design">
                <i class="fas fa-palette fa-2x mb-3 text-primary"></i>
                <h5>Design & Creative</h5>
                <p class="text-muted small">89 jobs available</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="category-box" data-category="marketing">
                <i class="fas fa-bullhorn fa-2x mb-3 text-primary"></i>
                <h5>Marketing</h5>
                <p class="text-muted small">67 jobs available</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="category-box" data-category="finance">
                <i class="fas fa-chart-line fa-2x mb-3 text-primary"></i>
                <h5>Finance</h5>
                <p class="text-muted small">54 jobs available</p>
            </div>
        </div>
    </div>
</section>
<!-- SMART FEATURES SECTION (ADD AFTER CATEGORY SECTION) -->
<section class="container my-5">
    <div class="text-center mb-4">
        <h2 class="fw-bold">Smart Features</h2>
        <p class="text-muted">Enhance your job search with AI-powered tools</p>
    </div>

    <div class="row g-4 justify-content-center">
        <!-- AI Career Assistant Card -->
        <div class="col-md-4 col-lg-3 mb-4">
            <div class="card h-100 border-0 shadow-sm rounded-4 hover-card">
                <div class="card-body text-center p-4">
                    <div class="icon-circle mb-3 mx-auto" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <i class="fas fa-robot fa-2x text-white"></i>
                    </div>
                    <h5 class="fw-bold mb-2">AI Career Assistant</h5>
                    <p class="text-muted small mb-3">Get personalized career advice powered by AI</p>
                    <a href="chatbot.html" class="btn btn-outline-primary rounded-pill">
                        <i class="fas fa-comments me-2"></i>Chat Now
                    </a>
                </div>
            </div>
        </div>
        
        
</section>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <p>© 2025 Smart Job Finder. All Rights Reserved.</p>
            </div>
            <div class="col-md-6 text-md-end">
                <a href="#" class="text-white me-3">Privacy Policy</a>
                <a href="#" class="text-white">Terms of Service</a>
            </div>
        </div>
    </div>
</footer>

<script>
const API_BASE_URL = "http://localhost:8000";

window.addEventListener('load', async function () {
    console.log('Dashboard loading...');

    const isLoggedIn = localStorage.getItem('isLoggedIn');
    if (!isLoggedIn) {
        window.location.href = 'login.html';
        return;
    }

    const isAdmin = localStorage.getItem('isAdmin') === 'true';
    if (isAdmin) {
        window.location.href = 'admin-dashboard.html';
        return;
    }

    const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
    const accessToken = localStorage.getItem('access_token');

    // Check profile completion
    await checkProfileCompletionStatus();

    // Display user info
    if (userData.fullName || userData.full_name) {
        const fullName = userData.fullName || userData.full_name;
        document.getElementById('welcomeMessage').textContent = `Welcome, ${fullName}!`;
    }

    // Load user stats
    await loadUserStats();

    // Load recommended jobs (NEW!)
    await loadRecommendedJobs();

    // Load activity timeline (NEW!)
    await loadActivityTimeline();

    // Initialize category handlers
    initializeCategoryHandlers();

    // Handle search form
    document.getElementById('dashboardSearchForm').addEventListener('submit', function (e) {
        const searchInput = document.getElementById('dashboardJobSearch');
        if (!searchInput.value.trim()) {
            e.preventDefault();
            alert('Please enter a search term');
            searchInput.focus();
        } else {
            localStorage.setItem('lastSearch', searchInput.value);
        }
    });
});

async function checkProfileCompletionStatus() {
    const accessToken = localStorage.getItem('access_token');
    if (!accessToken) return;

    try {
        // Use the detailed endpoint
        const response = await fetch(`${API_BASE_URL}/api/user/profile-completion-status`, {
            headers: {
                'Authorization': `Bearer ${accessToken}`,
                'Accept': 'application/json'
            }
        });

        if (response.ok) {
            const status = await response.json();
            console.log('Profile completion details:', status);

            const alert = document.getElementById('profileCompletionAlert');
            const text = document.getElementById('profileCompletionText');

            if (!status.completed) {
                alert.style.display = 'block';
                
                // Show detailed missing fields
                const missingCount = status.missing_fields.length;
                const missingFieldsText = status.missing_fields.slice(0, 3).join(', ');
                const moreText = status.missing_fields.length > 3 ? ` and ${status.missing_fields.length - 3} more` : '';
                
                text.innerHTML = `
                    <strong>Profile ${status.percentage}% complete</strong><br>
                    Missing: ${missingFieldsText}${moreText}
                `;
            } else {
                alert.style.display = 'none';
            }
        }
    } catch (error) {
        console.error('Error checking profile completion:', error);
    }
}

async function loadUserStats() {
    const accessToken = localStorage.getItem('access_token');
    if (!accessToken) {
        loadLocalStats();
        return;
    }

    try {
        const response = await fetch(`${API_BASE_URL}/api/stats/user-dashboard`, {
            headers: {
                'Authorization': `Bearer ${accessToken}`,
                'Accept': 'application/json'
            }
        });

        if (response.ok) {
            const stats = await response.json();
            console.log('Dashboard stats:', stats);

            document.getElementById('jobsApplied').textContent = stats.applications_count || 0;
            document.getElementById('jobsSaved').textContent = stats.saved_jobs_count || 0;
            document.getElementById('profileViews').textContent = stats.profile_views || 0;
            document.getElementById('interviews').textContent = stats.interviews_count || 0;

            const userData = JSON.parse(localStorage.getItem('currentUser') || '{}');
            userData.stats = {
                jobsApplied: stats.applications_count,
                jobsSaved: stats.saved_jobs_count,
                profileViews: stats.profile_views,
                interviews: stats.interviews_count
            };
            localStorage.setItem('currentUser', JSON.stringify(userData));
        } else {
            loadLocalStats();
        }
    } catch (error) {
        console.error('Error loading stats:', error);
        loadLocalStats();
    }
}

// NEW! Load recommended jobs
async function loadRecommendedJobs() {
    const accessToken = localStorage.getItem('access_token');
    if (!accessToken) return;

    const container = document.getElementById('recommendedJobsContainer');
    
    try {
        const response = await fetch(`${API_BASE_URL}/api/user/recommended-jobs?limit=6`, {
            headers: {
                'Authorization': `Bearer ${accessToken}`,
                'Accept': 'application/json'
            }
        });

        if (response.ok) {
            const jobs = await response.json();
            console.log('Recommended jobs:', jobs);

            if (jobs.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-4">
                        <i class="fas fa-briefcase fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">No recommendations yet</h5>
                        <p class="text-muted">Complete your profile to get personalized job recommendations</p>
                        <a href="upload-cv.html?edit=true" class="btn btn-primary rounded-pill">Complete Profile</a>
                    </div>
                `;
                return;
            }

            container.innerHTML = `
                <div class="row g-4">
                    ${jobs.map(job => createJobCard(job)).join('')}
                </div>
            `;

            initializeSaveButtons();
        } else {
            throw new Error('Failed to load recommended jobs');
        }
    } catch (error) {
        console.error('Error loading recommended jobs:', error);
        container.innerHTML = `
            <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle me-2"></i>
                Could not load recommended jobs. <a href="jobs.html">Browse all jobs</a>
            </div>
        `;
    }
}

// NEW! Load activity timeline
async function loadActivityTimeline() {
    const accessToken = localStorage.getItem('access_token');
    if (!accessToken) return;

    const container = document.getElementById('activityTimelineContainer');
    
    try {
        const response = await fetch(`${API_BASE_URL}/api/user/activity-timeline?limit=10`, {
            headers: {
                'Authorization': `Bearer ${accessToken}`,
                'Accept': 'application/json'
            }
        });

        if (response.ok) {
            const data = await response.json();
            const activities = data.activities || [];
            console.log('Activity timeline:', activities);

            if (activities.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-4">
                        <i class="fas fa-history fa-3x text-muted mb-3"></i>
                        <h5 class="text-muted">No activity yet</h5>
                        <p class="text-muted">Start applying to jobs to see your activity here</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = `
                <div class="list-group list-group-flush">
                    ${activities.map(activity => createActivityItem(activity)).join('')}
                </div>
            `;
        } else {
            throw new Error('Failed to load activity');
        }
    } catch (error) {
        console.error('Error loading activity:', error);
        container.innerHTML = `
            <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle me-2"></i>
                Could not load recent activity.
            </div>
        `;
    }
}

function createJobCard(job) {
    const jobId = job.id || job._id;
    const isSaved = isJobSaved(jobId);
    const saveButtonClass = isSaved ? 'save-btn saved' : 'save-btn';
    const saveButtonText = isSaved ? '<i class="fas fa-heart me-1"></i>Saved' : '<i class="far fa-heart me-1"></i>Save';
    
    return `
        <div class="col-md-6">
            <div class="job-card" data-job-id="${jobId}">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <span class="badge bg-success">${job.type || 'Full-Time'}</span>
                    <span class="text-muted"><i class="far fa-clock me-1"></i> ${getTimeAgo(job.posted_date)}</span>
                </div>
                
                <h4>${job.title}</h4>
                <p class="mb-1"><strong>${job.company}</strong></p>
                <p class="text-muted mb-3"><i class="fas fa-map-marker-alt me-1"></i> ${job.location}</p>
                
                <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold text-primary">${job.salary || 'Salary not specified'}</span>
                    <div>
                        <a href="job-details.html?id=${jobId}" class="btn btn-primary rounded-pill btn-sm me-2">View Details</a>
                        <button class="${saveButtonClass} btn-sm" data-job-id="${jobId}">${saveButtonText}</button>
                    </div>
                </div>
            </div>
        </div>
    `;
}

function isJobSaved(jobId) {
    const savedJobs = JSON.parse(localStorage.getItem('savedJobs') || '[]');
    return savedJobs.some(job => job.job_id === jobId || job.id === jobId);
}

function createActivityItem(activity) {
    const icon = activity.type === 'application' ? 'fa-paper-plane' : 'fa-heart';
    const color = activity.type === 'application' ? 'primary' : 'danger';
    const action = activity.type === 'application' ? 'Applied to' : 'Saved';
    
    return `
        <div class="list-group-item border-0 px-0 py-3">
            <div class="d-flex align-items-center">
                <div class="flex-shrink-0">
                    <div class="bg-${color} rounded-circle d-flex align-items-center justify-content-center text-white" style="width: 40px; height: 40px;">
                        <i class="fas ${icon}"></i>
                    </div>
                </div>
                <div class="flex-grow-1 ms-3">
                    <h6 class="mb-0">${action} <strong>${activity.job_title}</strong></h6>
                    <small class="text-muted">${activity.company} • ${getTimeAgo(activity.date)}</small>
                </div>
                ${activity.status ? `<span class="badge bg-${getStatusColor(activity.status)}">${activity.status}</span>` : ''}
            </div>
        </div>
    `;
}

function getStatusColor(status) {
    const colors = {
        'pending': 'warning',
        'reviewed': 'info',
        'shortlisted': 'primary',
        'accepted': 'success',
        'rejected': 'danger'
    };
    return colors[status] || 'secondary';
}

function getTimeAgo(dateString) {
    if (!dateString) return 'Recently';
    const date = new Date(dateString);
    const now = new Date();
    const diffMs = now - date;
    const diffMins = Math.floor(diffMs / 60000);
    const diffHours = Math.floor(diffMs / 3600000);
    const diffDays = Math.floor(diffMs / 86400000);

    if (diffMins < 60) return `${diffMins} minutes ago`;
    if (diffHours < 24) return `${diffHours} hours ago`;
    if (diffDays < 7) return `${diffDays} days ago`;
    return date.toLocaleDateString();
}

function loadLocalStats() {
    const savedJobs = JSON.parse(localStorage.getItem('savedJobs') || '[]');
    document.getElementById('jobsSaved').textContent = savedJobs.length;

    const appliedJobs = JSON.parse(localStorage.getItem('appliedJobs') || '[]');
    document.getElementById('jobsApplied').textContent = appliedJobs.length;

    document.getElementById('profileViews').textContent = 0;
    document.getElementById('interviews').textContent = 0;
}

function initializeCategoryHandlers() {
    const categoryBoxes = document.querySelectorAll('.category-box');
    categoryBoxes.forEach(box => {
        box.addEventListener('click', function () {
            const category = this.dataset.category;
            window.location.href = `jobs.html?category=${category}`;
        });
    });
}

function initializeSaveButtons() {
    const saveButtons = document.querySelectorAll('.save-btn');
    saveButtons.forEach(btn => {
        btn.addEventListener('click', async function () {
            const jobId = this.dataset.jobId;
            const jobCard = this.closest('.job-card');
            
            if (this.classList.contains('saved')) {
                // Unsave the job
                const success = await unsaveJob(jobId);
                if (success) {
                    this.classList.remove('saved');
                    this.innerHTML = '<i class="far fa-heart me-1"></i>Save';
                    showToast('Job removed from saved jobs', 'info');
                    
                    // Update saved jobs count
                    const savedCount = parseInt(document.getElementById('jobsSaved').textContent) - 1;
                    document.getElementById('jobsSaved').textContent = Math.max(0, savedCount);
                }
            } else {
                // Get job details to save
                try {
                    const accessToken = localStorage.getItem('access_token');
                    const response = await fetch(`${API_BASE_URL}/api/jobs/${jobId}`, {
                        headers: {
                            'Authorization': `Bearer ${accessToken}`,
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error('Could not fetch job details');
                    }
                    
                    const job = await response.json();
                    
                    // Save the job
                    const success = await saveJob(jobId, job);
                    if (success) {
                        this.classList.add('saved');
                        this.innerHTML = '<i class="fas fa-heart me-1"></i>Saved';
                        showToast('Job saved successfully!', 'success');
                        
                        // Update saved jobs count
                        const savedCount = parseInt(document.getElementById('jobsSaved').textContent) + 1;
                        document.getElementById('jobsSaved').textContent = savedCount;
                    }
                } catch (error) {
                    console.error('Error fetching job details:', error);
                    showToast('Error saving job. Please try again.', 'error');
                }
            }
        });
    });
}

async function saveJob(jobId, job) {
    const accessToken = localStorage.getItem('access_token');
    if (!accessToken) {
        alert('Please login to save jobs');
        window.location.href = 'login.html';
        return false;
    }

    try {
        const saveData = {
            job_id: jobId,
            title: job.title,
            company: job.company,
            location: job.location,
            type: job.type,
            salary: job.salary
        };

        const response = await fetch(`${API_BASE_URL}/api/saved-jobs/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${accessToken}`
            },
            body: JSON.stringify(saveData)
        });

        if (response.ok) {
            const savedJob = await response.json();
            const savedJobs = JSON.parse(localStorage.getItem('savedJobs') || '[]');
            savedJobs.push(savedJob);
            localStorage.setItem('savedJobs', JSON.stringify(savedJobs));
            return true;
        } else {
            throw new Error('Failed to save job');
        }
    } catch (error) {
        console.error('Error saving job:', error);
        showToast('Error saving job: ' + error.message, 'error');
        return false;
    }
}

async function unsaveJob(jobId) {
    const accessToken = localStorage.getItem('access_token');
    if (!accessToken) return false;

    try {
        const response = await fetch(`${API_BASE_URL}/api/saved-jobs/${jobId}`, {
            method: 'DELETE',
            headers: { 'Authorization': `Bearer ${accessToken}` }
        });

        if (response.ok) {
            const savedJobs = JSON.parse(localStorage.getItem('savedJobs') || '[]');
            const updatedJobs = savedJobs.filter(job => job.job_id !== jobId);
            localStorage.setItem('savedJobs', JSON.stringify(updatedJobs));
            return true;
        }
    } catch (error) {
        console.error('Error unsaving job:', error);
        showToast('Error unsaving job: ' + error.message, 'error');
        return false;
    }
}

function showToast(message, type = 'info') {
    // Remove any existing toast
    const existingToast = document.querySelector('.dashboard-toast');
    if (existingToast) existingToast.remove();
    
    // Create new toast
    const toast = document.createElement('div');
    toast.className = `dashboard-toast alert alert-${type} position-fixed`;
    toast.style.cssText = 'top:20px;right:20px;z-index:9999;min-width:300px;animation:slideInRight 0.5s;';
    toast.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation' : 'info'}-circle me-2"></i>
        ${message}
    `;
    document.body.appendChild(toast);
    
    // Auto remove after 3 seconds
    setTimeout(() => {
        toast.style.animation = 'slideOutRight 0.5s';
        setTimeout(() => toast.remove(), 500);
    }, 3000);
}

function logout() {
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('userEmail');
    localStorage.removeItem('currentUser');
    localStorage.removeItem('access_token');
    localStorage.removeItem('profileCompleted');
    window.location.href = 'index.html';
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>